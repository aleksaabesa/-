<!DOCTYPE html>
<html lang="ka">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>áƒ’áƒáƒ©áƒ˜áƒ—áƒ”</title>
    <link rel="manifest" href="manifest.json">
    <style>
        body { font-family: sans-serif; background: #000; color: white; margin: 0; text-align: center; }
        .header { background: #ff0000; padding: 15px; font-size: 24px; font-weight: bold; }
        video { width: 100%; max-width: 500px; border-radius: 10px; background: #222; margin-top: 10px; }
        .btn { background: #ff0000; color: white; padding: 12px; border: none; border-radius: 8px; cursor: pointer; width: 80%; margin: 10px auto; display: block; }
        .pwa-inst { background: #1a1a1a; padding: 15px; border: 1px solid #333; font-size: 14px; margin-top: 20px; }
        .hidden { display: none; }
        .quiz-card { background: rgba(255,0,0,0.2); padding: 15px; border-radius: 10px; margin: 15px; border: 1px solid red; }
    </style>
</head>
<body>

<div class="header">áƒ’áƒáƒ©áƒ˜áƒ—áƒ”</div>

<div id="pwa-guide" class="pwa-inst">
    <p>ğŸ“² <b>áƒ“áƒáƒáƒ˜áƒœáƒ¡áƒ¢áƒáƒšáƒ˜áƒ áƒ” áƒáƒáƒ˜:</b></p>
    <p><b>iOS:</b> áƒ“áƒáƒáƒ­áƒ˜áƒ áƒ” <img src="https://img.icons8.com/ios/20/ffffff/share.png"> (Share) -> Add to Home Screen</p>
    <p><b>Android:</b> áƒ“áƒáƒáƒ­áƒ˜áƒ áƒ” áƒ¡áƒáƒ› áƒ¬áƒ”áƒ áƒ¢áƒ˜áƒšáƒ¡ -> Install App</p>
    <button class="btn" style="width:50%" onclick="this.parentElement.style.display='none'">áƒ’áƒáƒ•áƒ’áƒ”áƒ‘áƒ˜</button>
</div>

<div id="login-section">
    <input type="email" id="email" placeholder="áƒ˜áƒ›áƒ”áƒ˜áƒšáƒ˜" style="width:70%; padding:10px; margin-top:20px;">
    <button class="btn" onclick="login()">áƒ¨áƒ”áƒ¡áƒ•áƒšáƒ</button>
</div>

<div id="admin-panel" class="hidden">
    <h3>ğŸ”´ LIVE áƒ áƒ”áƒŸáƒ˜áƒ›áƒ˜</h3>
    <video id="admin-video" autoplay playsinline muted></video>
    <button class="btn" onclick="startLive()">áƒšáƒáƒ˜áƒ•áƒ¨áƒ˜ áƒ’áƒáƒ¡áƒ•áƒšáƒ</button>
    <hr>
    <input type="text" id="q-text" placeholder="áƒ™áƒ˜áƒ—áƒ®áƒ•áƒ">
    <input type="text" id="ans1" placeholder="áƒ¡áƒ¬áƒáƒ áƒ˜ áƒáƒáƒ¡áƒ£áƒ®áƒ˜">
    <input type="text" id="ans2" placeholder="áƒáƒ áƒáƒ¡áƒ¬áƒáƒ áƒ˜ 1">
    <input type="text" id="ans3" placeholder="áƒáƒ áƒáƒ¡áƒ¬áƒáƒ áƒ˜ 2">
    <button class="btn" onclick="sendQuestion()">áƒ™áƒ˜áƒ—áƒ®áƒ•áƒ˜áƒ¡ áƒ’áƒáƒ’áƒ–áƒáƒ•áƒœáƒ</button>
</div>

<div id="user-view" class="hidden">
    <h3>ğŸ“º áƒšáƒáƒ˜áƒ• áƒ¨áƒáƒ£</h3>
    <video id="user-video" autoplay playsinline></video>
    <div id="active-question" class="quiz-card hidden">
        <h3 id="display-q"></h3>
        <div id="answer-buttons"></div>
    </div>
</div>

<script>
    let stream;
    async function login() {
        const email = document.getElementById('email').value.toLowerCase();
        document.getElementById('login-section').classList.add('hidden');
        if(email === 'gachite@gmail.com') {
            document.getElementById('admin-panel').classList.remove('hidden');
        } else {
            document.getElementById('user-view').classList.remove('hidden');
            listenForQuestions();
        }
    }

    async function startLive() {
        try {
            stream = await navigator.mediaDevices.getUserMedia({ video: true, audio: true });
            document.getElementById('admin-video').srcObject = stream;
            // áƒ¨áƒ”áƒœáƒ˜áƒ¨áƒ•áƒœáƒ: áƒ áƒ”áƒáƒšáƒ£áƒ  áƒšáƒáƒ˜áƒ•áƒ¡ áƒ¡áƒ®áƒ•áƒ áƒ¢áƒ”áƒšáƒ”áƒ¤áƒáƒœáƒ”áƒ‘áƒ–áƒ” áƒ¡áƒ­áƒ˜áƒ áƒ“áƒ”áƒ‘áƒ WebRTC áƒ¡áƒ”áƒ áƒ•áƒ”áƒ áƒ˜
            alert("áƒ™áƒáƒ›áƒ”áƒ áƒ áƒ©áƒáƒ˜áƒ áƒ—áƒ! áƒ áƒ”áƒáƒšáƒ£áƒ  áƒ¡áƒ¢áƒ áƒ˜áƒ›áƒ˜áƒœáƒ’áƒ¡ áƒ¡áƒ­áƒ˜áƒ áƒ“áƒ”áƒ‘áƒ áƒ‘áƒáƒ–áƒ.");
        } catch (e) { alert("áƒ™áƒáƒ›áƒ”áƒ áƒáƒ–áƒ” áƒ¬áƒ•áƒ“áƒáƒ›áƒ áƒáƒ™áƒ áƒ«áƒáƒšáƒ£áƒšáƒ˜áƒ"); }
    }

    function sendQuestion() {
        const q = {
            text: document.getElementById('q-text').value,
            ans: [document.getElementById('ans1').value, document.getElementById('ans2').value, document.getElementById('ans3').value],
            correct: document.getElementById('ans1').value
        };
        localStorage.setItem('gachite_q', JSON.stringify(q));
        alert("áƒ™áƒ˜áƒ—áƒ®áƒ•áƒ áƒ’áƒáƒ˜áƒ’áƒ–áƒáƒ•áƒœáƒ!");
    }

    function listenForQuestions() {
        setInterval(() => {
            const q = JSON.parse(localStorage.getItem('gachite_q'));
            if(q) {
                document.getElementById('active-question').classList.remove('hidden');
                document.getElementById('display-q').innerText = q.text;
                const container = document.getElementById('answer-buttons');
                container.innerHTML = '';
                q.ans.forEach(a => {
                    const b = document.createElement('button');
                    b.className = "btn";
                    b.innerText = a;
                    b.onclick = () => alert(a === q.correct ? "áƒ¡áƒ¬áƒáƒ áƒ˜áƒ!" : "áƒáƒ áƒáƒ¡áƒ¬áƒáƒ áƒ˜áƒ");
                    container.appendChild(b);
                });
            }
        }, 3000);
    }

    if ('serviceWorker' in navigator) { navigator.serviceWorker.register('sw.js'); }
</script>
</body>
</html>
